exports.id=253,exports.ids=[253],exports.modules={7629:(a,b,c)=>{"use strict";c.d(b,{p:()=>f});var d=c(21124);c(38301);var e=c(15514);function f({className:a,type:b,...c}){return(0,d.jsx)("input",{type:b,"data-slot":"input",className:(0,e.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a),...c})}},22821:(a,b,c)=>{"use strict";c.d(b,{BT:()=>i,Wu:()=>j,ZB:()=>h,Zp:()=>f,aR:()=>g});var d=c(75338);c(74515);var e=c(95012);function f({className:a,...b}){return(0,d.jsx)("div",{"data-slot":"card",className:(0,e.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...b})}function g({className:a,...b}){return(0,d.jsx)("div",{"data-slot":"card-header",className:(0,e.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...b})}function h({className:a,...b}){return(0,d.jsx)("div",{"data-slot":"card-title",className:(0,e.cn)("leading-none font-semibold",a),...b})}function i({className:a,...b}){return(0,d.jsx)("div",{"data-slot":"card-description",className:(0,e.cn)("text-muted-foreground text-sm",a),...b})}function j({className:a,...b}){return(0,d.jsx)("div",{"data-slot":"card-content",className:(0,e.cn)("px-6",a),...b})}},34225:(a,b,c)=>{"use strict";c.r(b),c.d(b,{"00c24f205a84c96b7edba96ea287614e2170857b53":()=>G,"404a9eee05858ecf24db494bff63afe9147212240f":()=>J,"40edcc1363526bb6f76457a3284cf16aa4f4ae35e3":()=>I,"605ef5fdeecb41590d8ea678dd7db1597ece46250a":()=>H,"60ec50cb875b001d0bc2f8be33288e710a9fe37167":()=>F});var d=c(91488);c(27806);var e=c(5962);function f(a){return a instanceof e.GaX?a.issues.map(a=>a.message).join(". "):"Something went wrong."}new Intl.NumberFormat("en-Europe",{currency:"RON",style:"currency",minimumFractionDigits:2});let g=e.YjP().refine(a=>/^\d+(\.\d{2})?$/.test(function(a){let[b,c]=a.toString().split(".");return c?`${b}.${c.padEnd(2,"0")}`:`${b}.00`}(Number(a))),"Price must have exactly two decimal places");e.Ikc({name:e.YjP().min(3,"Name must be at least 3 characters"),slug:e.YjP().min(3,"Slug must be at least 3 characters"),chategory:e.YjP().min(3,"Chategory must be at least 3 characters"),brand:e.YjP().min(3,"Brand must be at least 3 characters"),description:e.YjP().min(3,"Description must be at least 3 characters"),stock:e.auy.number(),images:e.YOg(e.YjP()).min(1,"Product must have at least one image"),isFeatured:e.zMY(),banner:e.YjP().nullable(),price:g});let h=e.Ikc({email:e.YjP().email("Invalid email address"),password:e.YjP().min(6,"Password must be at least 6 characters")}),i=e.Ikc({name:e.YjP().min(3,"Name must be at least 3 characters"),email:e.YjP().email("Invalid email address"),password:e.YjP().min(6,"Password must be at least 6 characters"),confirmPassword:e.YjP().min(6,"Password must be at least 6 characters")}).refine(a=>a.password===a.confirmPassword,{message:"Password don't match",path:["confirmPassword"]}),j=e.Ikc({productId:e.YjP().min(1,"Product ID is required"),name:e.YjP().min(1,"Name is required"),slug:e.YjP().min(1,"Slug is required"),qty:e.aig().int().nonnegative("Quantity must be a positive number"),image:e.YjP().min(1,"Image is required"),price:g});e.Ikc({items:e.YOg(j),itemsPrice:g,totalPrice:g,shippingPrice:g,taxPrice:g,sessionCartId:e.YjP().min(1,"Session Cart ID is required"),userId:e.YjP().optional().nullable()});let k=e.Ikc({fullName:e.YjP().min(3,"Name must be at least 3 characters"),streetAddress:e.YjP().min(3,"Address must be at least 3 characters"),city:e.YjP().min(3,"City must be at least 3 characters"),postalCode:e.YjP().min(3,"Postal code must be at least 3 characters"),country:e.YjP().min(3,"Country code must be at least 3 characters"),lat:e.aig().optional(),lng:e.aig().optional()});var l=c(43314),m=c(56771),n=c(12113),o=c(25),p=c(72684),q=c(96330),r=c(63832);o.Vz.webSocketConstructor=r.Ay;let s=`${process.env.DATABASE_URL}`,t=new o.bC({connectionString:s}),u=new p.J(t),v=new q.PrismaClient({adapter:u}).$extends({result:{product:{price:{compute:a=>a.price.toString()},rating:{compute:a=>a.rating.toString()}}}});var w=c(52570),x=c(70495),y=c(22646);let z={pages:{signIn:"/sign-in",error:"/sign-in"},session:{strategy:"jwt",maxAge:2592e3},adapter:(0,n.y)(v),providers:[(0,m.A)({credentials:{email:{type:"email"},password:{type:"password"}},async authorize(a){if(null==a)return null;let b=await v.user.findFirst({where:{email:a.email}});return b&&b.password&&(0,w.Dm)(a.password,b.password)?{id:b.id,name:b.name,email:b.email,role:b.role}:null}})],callbacks:{session:async({session:a,user:b,trigger:c,token:d})=>(a.user.id=d.sub,a.user.role=d.role,a.user.name=d.name,"update"===c&&(a.user.name=d.name),a),async jwt({token:a,user:b,trigger:c,session:d}){if(b&&(a.id=b.id,a.role=b.role,"NO_NAME"===b.name&&(a.name=b.email.split("@")[0],await v.user.update({where:{id:b.id},data:{name:a.name}})),"signIn"===c||"signUp"===c)){let a=await (0,x.UL)(),c=a.get("sessionCartId")?.value;if(c){let a=await v.cart.findFirst({where:{sessionCartId:c}});a&&(await v.cart.deleteMany({where:{userId:b.id}}),await v.cart.update({where:{id:a.id},data:{userId:b.id}}))}}return d?.user.name&&"update"===c&&(a.name=d.user.name),a},authorized({request:a,auth:b}){let{pathname:c}=a.nextUrl;if(!b&&[/\/shipping-address/,/\/payment-method/,/\/place-order/,/\/profile/,/\/user\/(.*)/,/\/order\/(.*)/,/\/admin/].some(a=>a.test(c)))return!1;if(a.cookies.get("sessionCartId"))return!0;{let b=crypto.randomUUID(),c=new Headers(a.headers),d=y.NextResponse.next({request:{headers:c}});return d.cookies.set("sessionCartId",b),d}}}},{handlers:A,auth:B,signIn:C,signOut:D}=(0,l.Ay)(z);var E=c(44338);async function F(a,b){try{let a=h.parse({email:b.get("email"),password:b.get("password")});return await C("credentials",a),{success:!0,message:"Signed in successfully"}}catch(a){if((0,E.isRedirectError)(a))throw a;return{success:!1,message:"Invalid email or password"}}}async function G(){await D()}async function H(a,b){try{let a=i.parse({name:b.get("name"),email:b.get("email"),password:b.get("password"),confirmPassword:b.get("confirmPassword")}),c=String(a.email).trim().toLowerCase();if(c&&await v.user.findUnique({where:{email:c}}))return{success:!1,message:"This email is already registered."};let d=a.password,e=(0,w.Y8)(a.password,10);return await v.user.create({data:{name:a.name,email:c,password:e}}),await C("credentials",{email:c,password:d}),{success:!0,message:"User registered successfully"}}catch(a){if((0,E.isRedirectError)(a))throw a;if(a?.code==="P2002")return{success:!1,message:"This email is already registered."};return{success:!1,message:f(a)}}}async function I(a){let b=await v.user.findFirst({where:{id:a}});if(!b)throw Error("User not found");return b}async function J(a){try{let b=await B(),c=await v.user.findFirst({where:{id:b?.user?.id}});if(!c)throw Error("User not found");let d=k.parse(a);return await v.user.update({where:{id:c.id},data:{address:d}}),{success:!0,message:"User address updated successfully"}}catch(a){return{success:!1,message:f(a)}}}(0,c(40410).D)([F,G,H,I,J]),(0,d.A)(F,"60ec50cb875b001d0bc2f8be33288e710a9fe37167",null),(0,d.A)(G,"00c24f205a84c96b7edba96ea287614e2170857b53",null),(0,d.A)(H,"605ef5fdeecb41590d8ea678dd7db1597ece46250a",null),(0,d.A)(I,"40edcc1363526bb6f76457a3284cf16aa4f4ae35e3",null),(0,d.A)(J,"404a9eee05858ecf24db494bff63afe9147212240f",null)},53199:(a,b,c)=>{"use strict";c.d(b,{J:()=>g});var d=c(21124);c(38301);var e=c(46029),f=c(15514);function g({className:a,...b}){return(0,d.jsx)(e.b,{"data-slot":"label",className:(0,f.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",a),...b})}},78335:()=>{},96487:()=>{},97467:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>e});var d=c(75338);function e({children:a}){return(0,d.jsx)("div",{className:"flex-center min-h-screen w-full",children:a})}}};